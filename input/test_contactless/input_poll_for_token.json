{
    "scripts": 
    [
        {
            "title": "test poll for token double card with no timeout, prefer mifare",
            "cards":
            [
                {
                    "cardID": 1,
                    "tokenType": "SMART_MX_WITH_MIFARE_1K",
                    "tokenID": "1234uniqueID",
                    "iso_4a":
                    {
                        "tokenID":"IsoSideTokenID",
                        "answerToSelect": "answertoselectbytes"

                    },
                    "mifare":
                    {
                        "tokenType": "MIFARE_CLASSIC_1K",
                        "tokenID":"mifareSideTokenID",
                        "clearKey_A": "\\xdd\\xdd\\xdd\\xdd\\xdd\\xdd",
                        "clearKey_B": "\\xff\\xff\\xff\\xff\\xff\\xff"
                    }
                }
            ],
            "steps":
            [
                {
                    "message": "4952000B0103010A06100120023001E8BE",
                    "actions":
                    [
                        {"attach_card": 1}
                    ]

                }
            ]
        },
        {
            "title": "test get prev result poll for token",
            "cards":
            [
                {
                    "cardID": 1,
                    "tokenType": "ISO_14443_4A",
                    "tokenID": "1234uniqueID",
                    "answerToSelect": "bytesbytes"
                }
            ],
            "steps":
            [
                {
                    "comment": "poll without timeout",
                    "message": "495200070303010A0220034D71",
                    "preactions":
                    [
                        {"attach_card": 1}
                    ]
                },
                {
                    "comment": "poll with timeout = 0",
                    "message": "495200070203010A0208004A3C"
                }
            ]
        },
        {
            "title": "test poll for token with timeout = 0 and no info on prev token",
            "steps":
            [
                {
                    "message": "495200070203010A0208004A3C"
                }
            ]
        },
        {
            "title": "test poll for token with cancelation",
            "cards":
            [
                {
                    "cardID": 1,
                    "tokenType": "ISO_14443_4A",
                    "tokenID": "1234uniqueID",
                    "answerToSelect": "bytesbytes"
                }
            ],
            "steps":
            [
                {
                    "message": "4952000C0103010A0708E8072002300110F7",
                    "actions":
                    [
                        {"send_cancel_message": ""}
                    ]

                }
            ]
        },
        {
            "title": "test poll for token with no timeout",
            "cards":
            [
                {
                    "cardID": 1,
                    "tokenType": "ISO_14443_4A",
                    "tokenID": "1234uniqueID",
                    "answerToSelect": "bytesbytes"
                }
            ],
            "steps":
            [
                {
                    "message": "495200070303010A0220034D71",
                    "actions":
                    [
                        {"attach_card": 1}
                    ]

                }
            ]
        },
        {
            "title": "test poll for token with no timeout and no card",
            "steps":
            [
                {
                    "message": "495200070303010A0220034D71"
                }
            ]
        },
        {
            "title": "test poll for token 1000 ms",
            "cards":
            [
                {
                    "cardID": 1,
                    "tokenType": "ISO_14443_4A",
                    "tokenID": "1234uniqueID",
                    "answerToSelect": "bytesbytes"
                }
            ],
            "steps":
            [
                {
                    "message": "4952000C0103010A0708E8072002300110F7",
                    "actions":
                    [
                        {"attach_card": 1}
                    ]

                }
            ]
        },
        {
            "title": "test poll for token 1000 ms with no cards",
            "steps":
            [
                {
                    "message": "4952000C0103010A0708E8072002300110F7"
                }
            ]
        },
        {
            "title": "test poll for token multiple cards",
            "cards":
            [
                {
                    "cardID": 1,
                    "tokenType": "ISO_14443_4A",
                    "tokenID": "1234uniqueID",
                    "answerToSelect": "bytesbytes"
                },
                {
                    "cardID": 2,
                    "tokenType": "MIFARE_CLASSIC_1K",
                    "tokenID": "4321uniqueID",
                    "clearKey_A": "\\xdd\\xdd\\xdd\\xdd\\xdd\\xdd",
                    "clearKey_B": "\\xff\\xff\\xff\\xff\\xff\\xff"
                }
            ],
            "steps":
            [
                {
                    "message": "4952000C0103010A0708E8072002300110F7",
                    "preactions":
                    [
                        {"attach_card": 1},
                        {"attach_card": 2}
                    ],
                    "actions":
                    [
                        {"remove_card": 1}
                    ]

                }
            ]
        }
    ]
}